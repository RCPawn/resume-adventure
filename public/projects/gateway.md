# ğŸ›¡ï¸ Microservice Gateway Platform

> **å¾®æœåŠ¡æµé‡æ²»ç†ä¸ç»Ÿä¸€æ¥å…¥å¹³å°**
>
> åŸºäº Spring Cloud Alibaba ç”Ÿæ€æ„å»ºçš„ä¼ä¸šçº§å¾®æœåŠ¡ç½‘å…³ï¼Œæ·±åº¦æ•´åˆäº† **åŠ¨æ€è·¯ç”±çƒ­æ›´æ–°**ã€**å…¨é“¾è·¯èº«ä»½å®‰å…¨é—­ç¯**ã€**Redis é˜²é‡æ”¾** åŠ **å¯è§†åŒ–æµé‡æ²»ç†**ã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾

![image-20260125003216356](gateway.assets/image-20260125003216356.png)

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§ä¸è¿›åº¦

### ğŸš€ Backend Core (åç«¯æ ¸å¿ƒ)
*   âœ… **åŸºç¡€æ¶æ„æ­å»º**ï¼šå®Œæˆ Nacos æ³¨å†Œä¸­å¿ƒæ¥å…¥ï¼Œæ‰“é€š Gateway -> Consumer -> Provider è°ƒç”¨é“¾è·¯ã€‚
*   âœ… **å…¨é“¾è·¯èº«ä»½é—­ç¯**ï¼šè®¾è®¡ `ThreadLocal` + `Feign` æ‹¦æˆªå™¨é€ä¼ æ–¹æ¡ˆï¼Œå®ç° Token/UserID åœ¨å¾®æœåŠ¡é“¾ä¸­çš„æ— ç¼ä¼ é€’ã€‚
*   âœ… **åŠ¨æ€è·¯ç”±çƒ­æ›´æ–°**ï¼šåŸºäº Nacos Config ç›‘å¬æœºåˆ¶ï¼Œå®ç°è·¯ç”±é…ç½®ä¿®æ”¹**ç§’çº§ç”Ÿæ•ˆ**ï¼Œæ— éœ€é‡å¯ç½‘å…³ã€‚
*   âœ… **æµé‡æ²»ç†**ï¼š
    *   é›†æˆ Sentinel å®ç°ç½‘å…³å±‚é™æµä¸ç†”æ–­é™çº§ã€‚
    *   **è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†**ï¼šè¿”å›æ ‡å‡†åŒ–çš„ JSON æç¤ºã€‚
    *   é…ç½®è§„åˆ™æŒä¹…åŒ–åˆ° Nacosï¼Œé¿å…é‡å¯ä¸¢å¤±ã€‚
*   âœ… **å®‰å…¨é˜²å¾¡ä½“ç³»**ï¼š
    *   **é˜²é‡æ”¾æ”»å‡» (Replay Attack)**ï¼šåŸºäº `Redis` + `Nonce` + `Timestamp` æœºåˆ¶ï¼Œæœ‰æ•ˆæ‹¦æˆªæ¶æ„é‡å¤è¯·æ±‚ã€‚
    *   **å…¨å±€ CORS**ï¼šç»Ÿä¸€è§£å†³å‰åç«¯åˆ†ç¦»è·¨åŸŸé—®é¢˜ã€‚
*   âœ… **API æ–‡æ¡£èšåˆ**ï¼šé›†æˆ Knife4jï¼Œç»Ÿä¸€èšåˆæ‰€æœ‰å¾®æœåŠ¡çš„ Swagger æ–‡æ¡£ã€‚

### ğŸ’» å¯è§†åŒ–æ§åˆ¶å°
*   âœ… **ç®¡ç†åå°**ï¼šåŸºäº Vue 3 + Vite + Element Plus æ„å»ºã€‚
*   âœ… **è·¯ç”±å¯è§†åŒ–ç®¡ç†**ï¼šå½»åº•å‘Šåˆ«æ‰‹å†™ JSONï¼å®ç°è·¯ç”±çš„**åœ¨çº¿æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤**ï¼Œæ“ä½œç»“æœå®æ—¶åŒæ­¥è‡³ Nacosã€‚
*   âœ… **æµé‡é©¾é©¶èˆ±**ï¼š(TODO) æ¥å…¥ ECharts å±•ç¤ºå®æ—¶ QPSã€ç½‘ç»œæ‹“æ‰‘...ã€‚

![image-20260211191442705](gateway.assets/image-20260211191442705.png)

![image-20260211191634913](gateway.assets/image-20260211191634913.png)

![image-20260211191827451](gateway.assets/image-20260211191827451.png)

![image-20260211191846909](gateway.assets/image-20260211191846909.png)

![image-20260211191916607](gateway.assets/image-20260211191916607.png)

---

## ğŸ” æ ¸å¿ƒæŠ€æœ¯åŸç†è§£æ

### 1. å…¨é“¾è·¯ Token é€ä¼ æœºåˆ¶
> **æŠ€æœ¯åŸç†**ï¼šé‡‡ç”¨â€œæ‰‹æç®±â€æ¨¡å¼ã€‚åœ¨ç½‘å…³å±‚å°† UserID è£…å…¥ HTTP Headerï¼Œåœ¨æœåŠ¡å†…éƒ¨å­˜å…¥ ThreadLocalï¼Œåœ¨å‘èµ· Feign è°ƒç”¨å‰å†æ¬¡æ‹¦æˆªå¹¶æ³¨å…¥ Headerã€‚

![image-20260125003001200](gateway.assets/image-20260125003001200.png)

### 2. é˜²é‡æ”¾æ”»å‡»é˜²å¾¡æœºåˆ¶ (Replay Attack Prevention)
> **æŠ€æœ¯åŸç†**ï¼šåˆ©ç”¨ **Redis (Nonce) + Timestamp (æ—¶é—´æˆ³)** åŒé‡æ ¡éªŒæœºåˆ¶ã€‚é˜²æ­¢é»‘å®¢æˆªè·åˆæ³•è¯·æ±‚åè¿›è¡Œæ¶æ„é‡æ”¾ã€‚

![image-20260125003021277](gateway.assets/image-20260125003021277.png)

### 3. ç»Ÿä¸€æ¥å£æ–‡æ¡£èšåˆ (Knife4j Aggregation)
> **æŠ€æœ¯åŸç†**ï¼šç½‘å…³ä½œä¸ºæµé‡å…¥å£ï¼Œç»Ÿä¸€æ‹¦æˆª Swagger èµ„æºè¯·æ±‚ï¼Œå¹¶æ ¹æ®è·¯ç”±è§„åˆ™é‡å†™è·¯å¾„ï¼Œå°†ä¸‹æ¸¸å¾®æœåŠ¡çš„æ–‡æ¡£æ•°æ®èšåˆå±•ç¤ºã€‚

![image-20260125003038147](gateway.assets/image-20260125003038147.png)

### 4. ç½‘å…³å¼‚æ­¥æ—¥å¿—ä¸å®¡è®¡
![image-20260125003056386](gateway.assets/image-20260125003056386.png)

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ
*   **Core Framework**: Spring Boot 3.x, Spring Cloud Alibaba 2022.x
*   **Gateway**: Spring Cloud Gateway (WebFlux å“åº”å¼ç¼–ç¨‹)
*   **Middleware**: Nacos 2.x, Sentinel, Redis
*   **RPC**: OpenFeign
*   **Frontend**: Vue 3, Vite, Element Plus, ECharts
